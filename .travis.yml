dist: xenial
language: python
addons:
  apt:
    packages:

stages:
  - lint
  - test

install:
  # Install required libraries.
  - pip install -r requirements.txt
  - pip install coveralls

jobs:
  include:
    # Compile all files.
    - stage: lint
      script:
        - python -m compileall ./src
        - python -m compileall ./tests
      python: 3.6
    - stage: lint
      script:
        - python -m compileall ./src
        - python -m compileall ./tests
      python: 3.7       # 3.6 stable/release
    - stage: lint
      script:
        - python -m compileall ./src
        - python -m compileall ./tests
      python: 3.7-dev   # 3.7 development branch

    - stage: test
      script:
        - python -m unittest discover -s tests
      python: 3.6

after_success:
  # Upload coverage data to codecov
  - coveralls


cache: pip
